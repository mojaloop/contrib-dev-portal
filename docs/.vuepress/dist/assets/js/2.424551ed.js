(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{404:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_2-peer-to-peer-transaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-peer-to-peer-transaction"}},[t._v("#")]),t._v(" 2. Peer to Peer Transaction")]),t._v(" "),s("p",[t._v("This guide takes you through the process of issuing a Peer to Peer (P2P) transaction from your DFSP to another DFSP.")]),t._v(" "),s("p",[t._v("A Mojaloop Transaction takes 3 distict phases:")]),t._v(" "),s("ol",[s("li",[t._v("Party Lookup")]),t._v(" "),s("li",[t._v("Quoting")]),t._v(" "),s("li",[t._v("Transfer")])]),t._v(" "),s("blockquote",[s("p",[t._v("Does this guide look too command line heavy for you? Try using the "),s("RouterLink",{attrs:{to:"/3-guides/5_ttk_p2p/"}},[t._v("Testing Toolkit")]),t._v(" instead.")],1)]),t._v(" "),s("h2",{attrs:{id:"_1-prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-prerequisites"}},[t._v("#")]),t._v(" 1. Prerequisites")]),t._v(" "),s("ul",[s("li",[t._v("Completed the "),s("a",{attrs:{href:"/3-guides/1_dfsp_setup"}},[t._v("DFSP setup guide")]),t._v(" and are succesfully recieving callbacks from the Mojaloop Sandbox")])]),t._v(" "),s("h2",{attrs:{id:"_2-party-lookup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-party-lookup"}},[t._v("#")]),t._v(" 2. Party Lookup")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("GET /parties/{Type}/{ID}\n")])])]),s("p",[t._v("The party lookup phase is where we lookup an identifier provided by "),s("em",[t._v("your end user")]),t._v(", and find out more information about the person (party in Mojaloop speak) that your user wants to send funds to. In the real world after recieiving the "),s("code",[t._v("PUT /parties/{Type}/{ID}")]),t._v(" callback response from the Mojaloop switch, you will confirm the data with your end user.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v beta.moja-lab.live/api/fspiop/parties/MSISDN/4448483173 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Accept: application/vnd.interoperability.parties+json;version=1'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/vnd.interoperability.parties+json;version=1.0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FSPIOP-Source: lewbank'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Date: 2021-01-01'")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Callback:")]),t._v(" "),s("code",[t._v("PUT /parties/MSISDN/4448483173")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("# formatted body\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"party"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MSISDN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdentifier"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4448483173"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fspId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"duriantech"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"complexName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"firstName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Draco"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"middleName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lastName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Dragon"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dateOfBirth"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1970-01-01"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Draco Dragon"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3-quote"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-quote"}},[t._v("#")]),t._v(" 3. Quote")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("POST /quotes\n")])])]),s("p",[t._v("After your user has confirmed the details of the end user, it's time to get a quote from the Payer DFSP about the fees associated with the transaction.")]),t._v(" "),s("p",[t._v("You can ask your user either "),s("em",[t._v('"How much money do you want to send?"')]),t._v(" or "),s("em",[t._v('"How much money would you like the receiver to receive?"')]),t._v(". In this example, we will the "),s("code",[t._v("RECEIVE_AMOUNT")]),t._v(", which is to say "),s("em",[t._v('"How much money would you like the receiver to receive?"')]),t._v(".")]),t._v(" "),s("p",[t._v("After receiving the quote response callback at "),s("code",[t._v("PUT /quotes/{ID}")]),t._v(", you can then inform your user of the fees associated with the transaction, and ask them whether or not they would liike to continue.")]),t._v(" "),s("p",[t._v("Referring to the "),s("a",{attrs:{href:"https://docs.mojaloop.io/mojaloop-specification/documents/API%20Definition%20v1.0.html#6522-post-quotes",target:"_blank",rel:"noopener noreferrer"}},[t._v("API Specification"),s("OutboundLink")],1),t._v(", we can build our example "),s("code",[t._v("POST /quotes")]),t._v(" request.")]),t._v(" "),s("p",[t._v("Here's a simple explanation of the key parameters we need to set:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("headers.Accept")]),t._v(" - "),s("code",[t._v("application/vnd.interoperability.quotes+json;version=1.0")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers.Content-Type")]),t._v(" - "),s("code",[t._v("application/vnd.interoperability.quotes+json;version=1.0")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers.Date")]),t._v(" - The RFC 2822 formatted date the request was made")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers.FSPIOP-Source")]),t._v(" - which DFSP is sending the request. In our example case, that is "),s("code",[t._v("lewbank")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers.FSPIOP-Destination")]),t._v(" - which DFSP we are sending the quote request to. We can find this by looking at the request body of the "),s("code",[t._v("PUT /parties")]),t._v(" response. In our case, that is "),s("code",[t._v("duriantech")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.quoteId")]),t._v(" - a random UUID, generated by you.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.transactionId")]),t._v(" - a random UUID, generated by you")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.payer")]),t._v(" - This complex object is the SENDER of the transfer, or your (as the sending DFSP's) customer")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.payee")]),t._v(" - The RECIEVE of the transfer. We can copy in the "),s("code",[t._v("PUT /parties")]),t._v(" response callback for this field")])])]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("Note: Generating a UUID")])]),t._v(" "),s("ul",[s("li",[t._v("For MacOS or Linux users, you can use "),s("code",[t._v("uuidgen")]),t._v(" to make a UUID for you: "),s("code",[t._v("uuidgen | awk '{print tolower($0)}'")])]),t._v(" "),s("li",[t._v("https://www.uuidgenerator.net/version4 is also a good option for quickly and easily generating UUIDs\nAlternatively, you can copy and paste the UUIDs in this guide and change a few digits at random")])])]),t._v(" "),s("p",[t._v("Here's an example quote:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"quoteId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"387ee6b9-520d-4c51-a9e4-6eb2ef15887a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transactionId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"387ee6b9-520d-4c51-a9e4-6eb2ef15887b"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payer"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MSISDN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdentifier"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"947947947947"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fspId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lewbank"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"personalInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"complexName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"firstName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mats"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lastName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hagman"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dateOfBirth"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1983-10-25"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payee"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MSISDN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"partyIdentifier"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4448483173"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fspId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"duriantech"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amountType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SEND"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"currency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transactionType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scenario"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TRANSFER"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"initiator"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PAYER"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"initiatorType"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONSUMER"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"note"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test p2p transfer"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("And as a full request:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST http://beta.moja-lab.live/api/fspiop/quotes "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Accept: application/vnd.interoperability.quotes+json;version=1.0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/vnd.interoperability.quotes+json;version=1.0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Date: Mon, 11 Jan 2021 00:00:00 GMT'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FSPIOP-Source: lewbank'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FSPIOP-Destination: duriantech'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{\n  "quoteId": "387ee6b9-520d-4c51-a9e4-6eb2ef15887a",\n  "transactionId": "387ee6b9-520d-4c51-a9e4-6eb2ef15887b",\n  "payer": {\n    "partyIdInfo": {\n      "partyIdType": "MSISDN",\n      "partyIdentifier": "947947947947",\n      "fspId": "lewbank"\n    },\n    "personalInfo": {\n      "complexName": {\n        "firstName": "Mats",\n        "lastName": "Hagman"\n      },\n      "dateOfBirth": "1983-10-25"\n    }\n  },\n  "payee": {\n    "partyIdInfo": {\n      "partyIdType": "MSISDN",\n      "partyIdentifier": "4448483173",\n      "fspId": "duriantech"\n    }\n  },\n  "amountType": "SEND",\n  "amount": {\n    "amount": "10",\n    "currency": "USD"\n  },\n  "transactionType": {\n    "scenario": "TRANSFER",\n    "initiator": "PAYER",\n    "initiatorType": "CONSUMER"\n  },\n  "note": "Test p2p transfer"\n}\'')]),t._v("\n")])])]),s("p",[s("strong",[t._v("Callback:")]),t._v(" "),s("code",[t._v("PUT /quotes/387ee6b9-520d-4c51-a9e4-6eb2ef15887a")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("# formatted body\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transferAmount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"currency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expiration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-01-11T05:46:41.943Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ilpPacket"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AYIC9gAAAAAAAAPoHWcucGF5ZWVmc3AubXNpc2RuLjI3NzEzODAzOTEyggLMZXlKMGNtRnVjMkZqZEdsdmJrbGtJam9pTXpnM1pXVTJZamt0TlRJd1pDMDBZelV4TFdFNVpUUXRObVZpTW1WbU1UVTRPRGRpSWl3aWNYVnZkR1ZKWkNJNklqTTROMlZsTm1JNUxUVXlNR1F0TkdNMU1TMWhPV1UwTFRabFlqSmxaakUxT0RnM1lTSXNJbkJoZVdWbElqcDdJbkJoY25SNVNXUkpibVp2SWpwN0luQmhjblI1U1dSVWVYQmxJam9pVFZOSlUwUk9JaXdpY0dGeWRIbEpaR1Z1ZEdsbWFXVnlJam9pTWpjM01UTTRNRE01TVRJaUxDSm1jM0JKWkNJNkluQmhlV1ZsWm5Od0luMTlMQ0p3WVhsbGNpSTZleUp3WVhKMGVVbGtTVzVtYnlJNmV5SndZWEowZVVsa1ZIbHdaU0k2SWsxVFNWTkVUaUlzSW5CaGNuUjVTV1JsYm5ScFptbGxjaUk2SWprME56azBOemswTnprME55SXNJbVp6Y0Vsa0lqb2lZWEJ3YkdWaVlXNXJJbjBzSW5CbGNuTnZibUZzU1c1bWJ5STZleUpqYjIxd2JHVjRUbUZ0WlNJNmV5Sm1hWEp6ZEU1aGJXVWlPaUpOWVhSeklpd2liR0Z6ZEU1aGJXVWlPaUpJWVdkdFlXNGlmU3dpWkdGMFpVOW1RbWx5ZEdnaU9pSXhPVGd6TFRFd0xUSTFJbjE5TENKaGJXOTFiblFpT25zaVlXMXZkVzUwSWpvaU1UQWlMQ0pqZFhKeVpXNWplU0k2SWxWVFJDSjlMQ0owY21GdWMyRmpkR2x2YmxSNWNHVWlPbnNpYzJObGJtRnlhVzhpT2lKVVVrRk9VMFpGVWlJc0ltbHVhWFJwWVhSdmNpSTZJbEJCV1VWU0lpd2lhVzVwZEdsaGRHOXlWSGx3WlNJNklrTlBUbE5WVFVWU0luMTkA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"condition"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"il1Z7j26cQt8WeIDHjadZaYKDKavNiUFXsaESeW558E"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payeeFspFee"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"currency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payeeFspCommission"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"currency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("If all went well, you will recieve a callback similar to the above. Check out "),s("a",{attrs:{href:"https://docs.mojaloop.io/mojaloop-specification/documents/API%20Definition%20v1.0.html#6531-put-quotesid",target:"_blank",rel:"noopener noreferrer"}},[t._v("this section of the API Definition"),s("OutboundLink")],1),t._v(" for an explainer of what these fields mean.")]),t._v(" "),s("h2",{attrs:{id:"_4-transfer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-transfer"}},[t._v("#")]),t._v(" 4. Transfer")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("POST /transfers\n")])])]),s("p",[t._v("Once you have confirmed the transaction details with your end user, and they have confirmed they would like to proceed with the transaction, you can issue a "),s("code",[t._v("POST /tranfers")]),t._v(".")]),t._v(" "),s("p",[t._v("This request moves the funds from your users account to the Payee user.")]),t._v(" "),s("p",[t._v("Take a look at "),s("a",{attrs:{href:"https://docs.mojaloop.io/mojaloop-specification/documents/API%20Definition%20v1.0.html#6722-post-transfers",target:"_blank",rel:"noopener noreferrer"}},[t._v("this section of the API Specification"),s("OutboundLink")],1),t._v(" for a detailed look at how to form the transfer request, but in short:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("headers.Accept")]),t._v(" - "),s("code",[t._v("application/vnd.interoperability.transfers+json;version=1.0")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers.Content-Type")]),t._v(" - "),s("code",[t._v("application/vnd.interoperability.transfers+json;version=1.0")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("headers.Date")]),t._v(" - The RFC 2822 formatted date the request was made")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("FSPIOP-Source")]),t._v(" - which DFSP is sending the request. In our example case, that is "),s("code",[t._v("lewbank")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("FSPIOP-Destination")]),t._v(" - which DFSP we are sending the quote request to. We can find this by looking at the request body of the "),s("code",[t._v("PUT /parties")]),t._v(" response. In our case, that is "),s("code",[t._v("duriantech")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.transferId")]),t._v(" - a random UUID, generated by you")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.payerFsp")]),t._v(" - Your DFSP_ID, in this case "),s("code",[t._v("lewbank")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.payeeFsp")]),t._v(" - The destination FSP, in this case "),s("code",[t._v("duriantech")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.amount")]),t._v(" - The same amount field from the "),s("code",[t._v("POST /quotes")]),t._v(" request")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.expiration")]),t._v(" - ISO Formatted string - when the transfer request will expire and be rolled back. This must be set to some time in the future.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.ilpPacket")]),t._v(" - The "),s("code",[t._v("ilpPacket")]),t._v(" specified by the Payee DFSP in the "),s("code",[t._v("PUT /quotes")]),t._v(" callback.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("body.condition")]),t._v(" - The "),s("code",[t._v("condition")]),t._v(" specified by the Payee DFSP in the "),s("code",[t._v("PUT /quotes")]),t._v(" callback.")])])]),t._v(" "),s("blockquote",[s("p",[t._v("Note: Read more about the condition and fulfillment "),s("a",{attrs:{href:"https://docs.mojaloop.io/mojaloop-specification/documents/API%20Definition%20v1.0.html#44-conditional-transfers",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("Here's an example Transfer request body:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transferId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"387ee6b9-520d-4c51-a9e4-6eb2ef15887e"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payerFsp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lewbank"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payeeFsp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"duriantech"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"currency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expiration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-01-25T00:00:00.000Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ilpPacket"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AYIC9gAAAAAAAAPoHWcucGF5ZWVmc3AubXNpc2RuLjI3NzEzODAzOTEyggLMZXlKMGNtRnVjMkZqZEdsdmJrbGtJam9pTXpnM1pXVTJZamt0TlRJd1pDMDBZelV4TFdFNVpUUXRObVZpTW1WbU1UVTRPRGRpSWl3aWNYVnZkR1ZKWkNJNklqTTROMlZsTm1JNUxUVXlNR1F0TkdNMU1TMWhPV1UwTFRabFlqSmxaakUxT0RnM1lTSXNJbkJoZVdWbElqcDdJbkJoY25SNVNXUkpibVp2SWpwN0luQmhjblI1U1dSVWVYQmxJam9pVFZOSlUwUk9JaXdpY0dGeWRIbEpaR1Z1ZEdsbWFXVnlJam9pTWpjM01UTTRNRE01TVRJaUxDSm1jM0JKWkNJNkluQmhlV1ZsWm5Od0luMTlMQ0p3WVhsbGNpSTZleUp3WVhKMGVVbGtTVzVtYnlJNmV5SndZWEowZVVsa1ZIbHdaU0k2SWsxVFNWTkVUaUlzSW5CaGNuUjVTV1JsYm5ScFptbGxjaUk2SWprME56azBOemswTnprME55SXNJbVp6Y0Vsa0lqb2lZWEJ3YkdWaVlXNXJJbjBzSW5CbGNuTnZibUZzU1c1bWJ5STZleUpqYjIxd2JHVjRUbUZ0WlNJNmV5Sm1hWEp6ZEU1aGJXVWlPaUpOWVhSeklpd2liR0Z6ZEU1aGJXVWlPaUpJWVdkdFlXNGlmU3dpWkdGMFpVOW1RbWx5ZEdnaU9pSXhPVGd6TFRFd0xUSTFJbjE5TENKaGJXOTFiblFpT25zaVlXMXZkVzUwSWpvaU1UQWlMQ0pqZFhKeVpXNWplU0k2SWxWVFJDSjlMQ0owY21GdWMyRmpkR2x2YmxSNWNHVWlPbnNpYzJObGJtRnlhVzhpT2lKVVVrRk9VMFpGVWlJc0ltbHVhWFJwWVhSdmNpSTZJbEJCV1VWU0lpd2lhVzVwZEdsaGRHOXlWSGx3WlNJNklrTlBUbE5WVFVWU0luMTkA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"condition"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"il1Z7j26cQt8WeIDHjadZaYKDKavNiUFXsaESeW558E"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("And an example full request:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST http://beta.moja-lab.live/api/fspiop/transfers "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Accept: application/vnd.interoperability.transfers+json;version=1.0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/vnd.interoperability.transfers+json;version=1.0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Date: Mon, 11 Jan 2021 00:00:00 GMT'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FSPIOP-Source: lewbank'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'FSPIOP-Destination: duriantech'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{\n    "transferId": "387ee6b9-520d-4c51-a9e4-6eb2ef15887e",\n    "payerFsp": "lewbank",\n    "payeeFsp": "duriantech",\n    "amount": {\n      "amount": "10",\n      "currency": "USD"\n    },\n    "expiration": "2021-01-25T00:00:00.000Z",\n    "ilpPacket": "AYIC9gAAAAAAAAPoHWcucGF5ZWVmc3AubXNpc2RuLjI3NzEzODAzOTEyggLMZXlKMGNtRnVjMkZqZEdsdmJrbGtJam9pTXpnM1pXVTJZamt0TlRJd1pDMDBZelV4TFdFNVpUUXRObVZpTW1WbU1UVTRPRGRpSWl3aWNYVnZkR1ZKWkNJNklqTTROMlZsTm1JNUxUVXlNR1F0TkdNMU1TMWhPV1UwTFRabFlqSmxaakUxT0RnM1lTSXNJbkJoZVdWbElqcDdJbkJoY25SNVNXUkpibVp2SWpwN0luQmhjblI1U1dSVWVYQmxJam9pVFZOSlUwUk9JaXdpY0dGeWRIbEpaR1Z1ZEdsbWFXVnlJam9pTWpjM01UTTRNRE01TVRJaUxDSm1jM0JKWkNJNkluQmhlV1ZsWm5Od0luMTlMQ0p3WVhsbGNpSTZleUp3WVhKMGVVbGtTVzVtYnlJNmV5SndZWEowZVVsa1ZIbHdaU0k2SWsxVFNWTkVUaUlzSW5CaGNuUjVTV1JsYm5ScFptbGxjaUk2SWprME56azBOemswTnprME55SXNJbVp6Y0Vsa0lqb2lZWEJ3YkdWaVlXNXJJbjBzSW5CbGNuTnZibUZzU1c1bWJ5STZleUpqYjIxd2JHVjRUbUZ0WlNJNmV5Sm1hWEp6ZEU1aGJXVWlPaUpOWVhSeklpd2liR0Z6ZEU1aGJXVWlPaUpJWVdkdFlXNGlmU3dpWkdGMFpVOW1RbWx5ZEdnaU9pSXhPVGd6TFRFd0xUSTFJbjE5TENKaGJXOTFiblFpT25zaVlXMXZkVzUwSWpvaU1UQWlMQ0pqZFhKeVpXNWplU0k2SWxWVFJDSjlMQ0owY21GdWMyRmpkR2x2YmxSNWNHVWlPbnNpYzJObGJtRnlhVzhpT2lKVVVrRk9VMFpGVWlJc0ltbHVhWFJwWVhSdmNpSTZJbEJCV1VWU0lpd2lhVzVwZEdsaGRHOXlWSGx3WlNJNklrTlBUbE5WVFVWU0luMTkA",\n    "condition": "il1Z7j26cQt8WeIDHjadZaYKDKavNiUFXsaESeW558E"\n  }\'')]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("There are a few common gotchas at this point:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("body.expiration")]),t._v(" - Make sure to set this date to be some time in the future, otherwise you will recieve an error callback like so: "),s("code",[t._v("eneric validation error - Expiration date ... is already in the past")])]),t._v(" "),s("li",[t._v("The "),s("code",[t._v("header.Date")]),t._v(" format for this request is quite fiddly, and requires a different format for the expiration field. Make sure you use an RFC 2822 formatted date.\nMake sure to check the transaction callbacks in your docker window to see what is going on. Often you will receive a "),s("code",[t._v("/error")]),t._v(" callback with a useful description that can help you debug.")])])]),t._v(" "),s("p",[s("strong",[t._v("Callback:")]),t._v(" "),s("code",[t._v("PUT /transfers/{ID}")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("# formatted response\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"completedTimestamp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2021-01-11T06:04:44.144Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"transferState"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"COMMITTED"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fulfilment"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0zd54QZIdAqqtpTzb-JvkavFCoBHeNHxoDT1IB-8KwA"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("And that's it! The transaction has cleared with Mojaloop. You can now inform your customer that the funds have been sent. Check out "),s("a",{attrs:{href:"https://docs.mojaloop.io/mojaloop-specification/documents/API%20Definition%20v1.0.html#6731-put-transfersid",target:"_blank",rel:"noopener noreferrer"}},[t._v("this section of the API spec"),s("OutboundLink")],1),t._v(" for an explanation of these fields.")])])}),[],!1,null,null,null);a.default=n.exports}}]);